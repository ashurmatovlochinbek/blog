<!doctype html>
<html lang="en">
<head>
  {% load static %}
  {% block title %}<title>Blog project</title>{% endblock %}
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
</head>
<body>
  <div class="container">
    <div class="sidebar">
      <h3>Navigation</h3>
      <a href="{% url 'index' %}">Home</a>

      <!-- Login shown prominently for guests -->
      {% if not user.is_authenticated %}
        <a href="{% url 'login' %}">Login</a>
        <a href="{% url 'register' %}">Register</a>
        <a href="{% url 'blog-list' %}">Blogs</a>
      {% else %}
        <!-- Optional: show username near top -->
        <div class="user-info" style="margin: 10px 0; font-size: 11px; color: #444;">
          <a>Username: {{ user.username }}</a>
        </div>
      {% endif %}

      <!-- Spacer to push logout to bottom -->
      <div style="flex: 1;"></div>

      <!-- Logout ONLY for authenticated users, at the very bottom -->
      {% if user.is_authenticated %}
          <div class="sidebar-logout" style="margin-top: auto; padding-top: 12px; border-top: 1px solid #ccc;">
            <form method="post" action="{% url 'logout' %}" style="margin: 0;">
              {% csrf_token %}
              <button type="submit">Logout</button>
            </form>
          </div>
      {% endif %}
    </div>

    <div class="content">
        {% block content %}{% endblock %}
        {% block pagination %}
            {% if is_paginated %}
              <div class="pagination">
                <span class="page-links">
                  {% if page_obj.has_previous %}
                    <a href="{{ request.path }}?page={{ page_obj.previous_page_number }}">previous</a>
                  {% endif %}
                  <span class="page-current">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.</span>
                  {% if page_obj.has_next %}
                    <a href="{{ request.path }}?page={{ page_obj.next_page_number }}">next</a>
                  {% endif %}
                </span>
              </div>
            {% endif %}
        {% endblock %}
    </div>
  </div>

</body>
</html>